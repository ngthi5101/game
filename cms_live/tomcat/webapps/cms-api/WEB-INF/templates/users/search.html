<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">

    <head>

        <meta charset="utf-8"/>
   		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png" th:href="@{/resources/dashboard_files/favicon.png}"/>	

        <title data-th-text="#{admin.page.title}">Yoker - Users</title>

        <!-- Core CSS - Include with every page -->
        <link href="../css/bootstrap.min.css" rel="stylesheet"  th:href="@{/resources/sb-admin-v2/css/bootstrap.min.css}"/>
        <link href="../font-awesome/css/font-awesome.css" rel="stylesheet"  th:href="@{/resources/sb-admin-v2/font-awesome/css/font-awesome.css}"/>
        <link href="../bootstrap-daterangepicker/daterangepicker-bs3.css" rel="stylesheet" type="text/css" media="all" th:href="@{/resources/bootstrap-daterangepicker/daterangepicker-bs3.css}"/>
        <!-- Page-Level Plugin CSS - Dashboard -->
        <link href="../css/plugins/dataTables/dataTables.bootstrap.css" rel="stylesheet" th:href="@{/resources/sb-admin-v2/css/plugins/dataTables/dataTables.bootstrap.css}"/>
        <!-- SB Admin CSS - Include with every page -->
        <link href="../css/sb-admin.css" rel="stylesheet"  th:href="@{/resources/sb-admin-v2/css/sb-admin.css}"/>

    </head>

    <body>

        <div id="wrapper">
            <div data-th-replace="fragments/sb-admin :: top-nav"></div>
    		<div data-th-replace="fragments/sb-admin :: vert-nav-admin"></div>
            <div id="page-wrapper">
                <div class="row">
                    <div class="col-lg-12">
                        <h1 class="page-header">Tìm người chơi</h1>
                    </div>
                    <!-- /.col-lg-12 -->
                </div>
                <div class="row">
                    <div class="panel-body">
                       <div class="col-lg-4">
                		<div class="input-group custom-search-form">
                           <input type="text" class="form-control" placeholder="Người chơi..." id="username"/>
                           <span class="input-group-btn">
                               <button class="btn btn-default" type="button">
                                   <i class="fa fa-search"></i>
                               </button>
                           </span>
                       </div>
                       <!-- /input-group -->    
                  </div>
                  <div class="col-lg-4">
                		<div class="input-group custom-search-form">
                           <input type="text" class="form-control" placeholder="Số điện thoại..." id="mobile"/>
                           <span class="input-group-btn">
                               <button class="btn btn-default" type="button">
                                   <i class="fa fa-search"></i>
                               </button>
                           </span>
                       </div>
                       <!-- /input-group -->    
                    </div>
                </div>
                <!-- /.row -->
                <div class="row">
                        <div class="col-lg-12">
                            <div class="panel panel-info">
                                <div class="panel-heading">
		                        <i>Kết quả</i>
		                        </div>                        
                                <div class="panel-body">                        
                                    <div class="table-responsive">                            
                                        <table class="table table-striped table-bordered table-hover" id="dataTableUsers">                               
                                            <thead>                                    
                                                <tr>                                         
	                                                <th>ID</th>
	                                                <th>Username</th>
	                                                <th>Full Name</th>
	                                                <th>Email</th>
	                                                <th>Mobile</th>
	                                                <th>Chip</th>
	                                                <th>+</th>
                                                </tr>
                                            </thead>                                           
                                        </table>
                                    </div>
                                    <!-- /.table-responsive -->
                                </div>
                                <!-- /.panel-body -->
                            </div>
                            <!-- /.panel -->
                        </div>
                        <!-- /.col-lg-6 -->
                    </div>
                  <!--  end row -->
            </div>
            <!-- /#page-wrapper -->
        </div>
        <!-- /#wrapper -->
        <!-- Core Scripts - Include with every page -->
        <script src="../js/jquery-1.10.2.js" th:src="@{/resources/sb-admin-v2/js/jquery-1.10.2.js}"></script>
        <script src="../js/bootstrap.min.js" th:src="@{/resources/sb-admin-v2/js/bootstrap.min.js}"></script>
        <script src="../js/plugins/metisMenu/jquery.metisMenu.js" th:src="@{/resources/sb-admin-v2/js/plugins/metisMenu/jquery.metisMenu.js}"></script>
        <!-- Page-Level Plugin Scripts - Tables -->
        <script src="../js/plugins/dataTables/jquery.dataTables.js" th:src="@{/resources/sb-admin-v2/js/plugins/dataTables/jquery.dataTables.js}"></script>
        <script src="../js/plugins/dataTables/dataTables.bootstrap.js" th:src="@{/resources/sb-admin-v2/js/plugins/dataTables/dataTables.bootstrap.js}"></script>
        <!-- SB Admin Scripts - Include with every page -->
        <script src="../js/sb-admin.js" th:src="@{/resources/sb-admin-v2/js/sb-admin.js}"></script>
        <!-- Page-Level Demo Scripts - Tables - Use for reference -->
        <script type="text/javascript" src="../bootstrap-daterangepicker/moment.js" th:src="@{/resources/bootstrap-daterangepicker/moment.js}"></script>
        <script type="text/javascript" src="../bootstrap-daterangepicker/daterangepicker.js" th:src="@{/resources/bootstrap-daterangepicker/daterangepicker.js}"></script>
        <script>
        //Plug-in to fetch page data 
	        jQuery.fn.dataTableExt.oApi.fnPagingInfo = function (oSettings)
	        {
	            return {
	                "iStart": oSettings._iDisplayStart,
	                "iEnd": oSettings.fnDisplayEnd(),
	                "iLength": oSettings._iDisplayLength,
	                "iTotal": oSettings.fnRecordsTotal(),
	                "iFilteredTotal": oSettings.fnRecordsDisplay(),
	                "iPage": oSettings._iDisplayLength === -1 ?
	                        0 : Math.ceil(oSettings._iDisplayStart / oSettings._iDisplayLength),
	                "iTotalPages": oSettings._iDisplayLength === -1 ?
	                        0 : Math.ceil(oSettings.fnRecordsDisplay() / oSettings._iDisplayLength)
	            };
	        };
          //load page
            $(document).ready(function () {
              /*   $("#username").change(function() {
                	filterGlobal();
                	});
                $("#mobile").change(function() {
                	filterGlobal();
            	}); */
            });
            var table = $("#dataTableUsers").dataTable({
                "bProcessing": true,
                "bServerSide": true,
                "order": [[ 2, "desc" ]],
                "ordering": true,                   
               // 'bFilter': false,
                //bStateSave variable you can use to save state on client cookies: set value "true" 
                "bStateSave": false,
                //Default: Page display length
                "iDisplayLength": 10,
                //We will use below variable to track page number on server side(For more information visit: http://legacy.datatables.net/usage/options#iDisplayStart)
                "iDisplayStart": 0,                    
                "sAjaxSource": "/users/search.html", 
                "fnServerData": function ( sSource, aoData, fnCallback, oSettings ) {
                    oSettings.jqXHR = $.ajax( {
                      "dataType": 'json',                          
                      "url": sSource,
                      "contentType": "application/json; charset=utf-8",
                      "data": aoData,
                      "success": fnCallback
                    } );
                  },
              "fnServerParams": function (aoData) {                      
                    aoData.push({name: "username", value: $("#username").val()});
                    aoData.push({name: "mobile", value:$("#mobile").val()});
                },
                "aoColumns": [
                    {"mData": "id"},
                    {"mData": "username", "mRender": function (data, type, full) {
                        return '<a href="../users/detail.html?user_id=' + full.id + '" >' + full.username+ '</a>';
                    }},
                    {"mData": "fullname"},
                    {"mData": "email"},
                    {"mData": "mobile"},
                    {"mData": "koin.koin"}
                ]
            });
            function filterGlobal () {
                $('#dataTables-users').DataTable().search("",true,true
                ).draw();
            }           
            function ConfirmDelete()
            {
                var x = confirm("Bạn mu xóa ?");
                if (x)
                    return true;
                else
                    return false;
            }
            $('#reservationtime').daterangepicker({
                timePicker: false,
                format: 'YYYY/MM/DD'
            }, function (start, end, label) {
                console.log('A date range was chosen: ' + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD'));
                $('#from_date').val(start.format('YYYY-MM-DD'));
                $('#to_date').val(end.format('YYYY-MM-DD'));
            });
        </script>

    </body>

</html>
