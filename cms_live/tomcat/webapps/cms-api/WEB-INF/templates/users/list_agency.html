<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png" th:href="@{/resources/dashboard_files/favicon.png}" />
<title data-th-text="#{admin.page.title}">Title</title>
<!-- Core CSS - Include with every page -->
<link href="css/bootstrap.min.css" rel="stylesheet" th:href="@{/resources/sb-admin-v2/css/bootstrap.css}" />
<!-- DataTables CSS -->
<link href="css/plugins/dataTables.bootstrap.css" rel="stylesheet" th:href="@{/resources/sb-admin-v2/css/plugins/dataTables/dataTables.bootstrap.css}" />

<link href="font-awesome/css/font-awesome.css" rel="stylesheet" th:href="@{/resources/sb-admin-v2/font-awesome/css/font-awesome.css}" />

<!-- SB Admin CSS - Include with every page -->
<link href="css/sb-admin.css" rel="stylesheet" th:href="@{/resources/sb-admin-v2/css/sb-admin.css}" />
<link href="css/sb-admin.css" rel="stylesheet" th:href="@{/resources/sb-admin-v2/css/metisMenu.min.css}" />
</head>
<body>
	<div id="wrapper">
		<div th:if="${userType} == 1">
			<div data-th-replace="fragments/sb-admin :: top-nav"></div>
			<div data-th-replace="fragments/sb-admin :: vert-nav-admin"></div>
		</div>
		<div th:if="${userType} == 2">
			<div data-th-replace="fragments/sb-admin :: top-nav"></div>
			<div data-th-replace="fragments/sb-admin :: vert-nav-admin"></div>
		</div>
		<div th:if="${userType} == 3">
			<div data-th-replace="cskh/sb-care :: top-nav"></div>
			<div data-th-replace="cskh/sb-care :: vert-nav-admin"></div>
		</div>
		<div id="page-wrapper">
			<div class="container-fluid">
				<form id="UserForm" class="form-horizontal" action="/users/list_agency.html" th:action="@{/users/list_agency.html}" method="POST">
					<div class="row">
						<div class="col-lg-12">
							<h1 class="page-header">Danh sách đại lí C2</h1>
						</div>
						<!-- /.col-lg-12 -->
					</div>
					<!-- /.row -->
					<div class="row" style="display: none;">
						<div class="col-lg-3" >
                                    <label>Loại</label>
                                    <div>
                                        <select name="user_type" class="form-control">
											<option value="agency_level_1" th:selected="${agency_level_1 == 'agency_level_1'}">Đại lí cấp 1</option>
											<option value="agency_level_2" th:selected="${user_type == 'agency_level_2'}">Đại lí cấp 2</option>
										</select>
                                    </div>
						</div>
						<div class="col-lg-2">
										<label>&nbsp;</label>
										<div>
											<button type="submit" class="btn btn-info">Gửi</button>
										</div>
									</div>
					</div>
					<div class="row">
						<div class="col-lg-12">
							<h1 class="page-header"></h1>
						</div>
					</div>
					<!-- /.row -->
					<div class="row">
						<div class="col-lg-12">
							<div class="panel panel-info">
								<div class="panel-heading">
									<i>Kết quả</i>
								</div>
								<div class="panel-body">
									<div class="table-responsive">
										<table class="table table-striped table-bordered table-hover" id="dataTableUers">
											<thead>
												<tr>
													<th>ID</th>
													<th>Tên đăng nhập</th>
													<th>Tên nhân vật</th>
													<th>Số điện thoại</th>
													<th>Ngày đăng kí</th>
													<th>Tiền</th>
													<!-- <th th:if="${userType  == 1 or userType  == 2}">Exps</th>
													<th th:if="${userType  == 1 or userType  == 2}">Level</th>
													<th th:if="${userType  == 1 or userType  == 2}">Achi</th> -->
												</tr>
											</thead>
											<tbody>
												<tr class="odd gradeX" th:each="oneUser : ${users}">
													<td th:text="${oneUser.id}">Trident</td>
                                                                                                        <!--<td><a href="detail.html?user_id=1'" th:href="@{'/users/detail.html?user_id=' + ${oneUser.id}}" th:text="${oneUser.username}"></a></td>-->
                                                                                                        <td th:text="${oneUser.username}"></td>
													<td th:text="${oneUser.fullname}"></td>
													<td th:text="${oneUser.mobile}"></td>
													<td th:text="${oneUser.dateCreated}"></td>
													<td th:text="${oneUser.gold.gold}" class="amount_gold"></td>
													<!-- <td th:if="${userType  == 1 or userType  == 2}"><a href="#" th:href="@{'/users/user_status.html?user_id=' + ${oneUser.id}}"><span
															th:if="${oneUser.status  == 0}" th:text="'ACTIVE'"></span> <span th:if="${oneUser.status  == 1}" th:text="'LOCK'"></span> <span
															th:if="${oneUser.status  == 2}" th:text="'LOCK_CASHOUT'"></span> <span th:if="${oneUser.status  == 3}" th:text="'LOCK_FREE_SPIN'"></span> <span
															th:if="${oneUser.status  == 4}" th:text="'LOCK_FREE_POCKER'"></span></a></td>
													<td th:if="${userType  == 1 or userType  == 2}"><a href="#" th:href="@{'/users/exps.html?user_id=' + ${oneUser.id}}">Exps</a></td>
													<td th:if="${userType  == 1 or userType  == 2}"><a href="#" th:href="@{'/users/level.html?user_id=' + ${oneUser.id}}">Level</a></td>
													<td th:if="${userType  == 1 or userType  == 2}"><a href="#" th:href="@{'/users/achis.html?user_id=' + ${oneUser.id}}">Achi</a></td> -->
												</tr>
											</tbody>
										</table>
									</div>
									<!-- /.table-responsive -->
								</div>
								<!-- /.panel-body -->
							</div>
							<!-- /.panel -->
						</div>
						<!-- /.col-lg-6 -->
					</div>
					<!-- /.container-fluid -->
				</form>
			</div>
		</div>
	</div>
	<!-- /#wrapper -->

	<!-- Core Scripts - Include with every page -->
	<script src="js/jquery-1.10.2.js" th:src="@{/resources/sb-admin-v2/js/jquery-1.10.2.js}"></script>
	<script src="js/bootstrap.min.js" th:src="@{/resources/sb-admin-v2/js/bootstrap.min.js}"></script>
	<script src="js/plugins/metisMenu/jquery.metisMenu.js" th:src="@{/resources/sb-admin-v2/js/plugins/metisMenu/jquery.metisMenu.js}"></script>
	<!-- SB Admin Scripts - Include with every page -->
	<script src="js/sb-admin.js" th:src="@{/resources/sb-admin-v2/js/sb-admin.js}"></script>
	<!-- Page-Level Plugin Scripts - Tables -->
	<script src="js/plugins/dataTables/jquery.dataTables.js" th:src="@{/resources/sb-admin-v2/js/plugins/dataTables/jquery.dataTables.js}"></script>
	<script src="js/plugins/dataTables/dataTables.bootstrap.js" th:src="@{/resources/sb-admin-v2/js/plugins/dataTables/dataTables.bootstrap.js}"></script>

	<script type="text/javascript" charset="utf-8">
		$(document).ready(function() {
			//page load
			$('#dataTableUers').dataTable();
//			$('.amount_gold').each(function(i, o){
//				$(o).text( numberWithCommas(parseInt($(o).text())));
//			});
			setTimeout(() => {
					$('.dataTable th.sorting:last-child').click();
					setTimeout(() => {
						$('.dataTable th.sorting_asc:last-child').click();
						autoFormatEachTotal();
						setInterval(autoFormatEachTotal, 2000);
					}, 100);
			}, 0);
		});
		function autoFormatEachTotal(){
				var $ = jQuery;
				var sum_all_user_gold = 0;
						$('.amount_gold').each((i, o) => {
							sum_all_user_gold += parseInt($(o).text().replaceAll(",", ""));
							$(o).text(numberWithCommas($(o).text()));
						});
		}
		String.prototype.replaceAll = function (search, replacement) {
				var target = this;
				return target.replace(new RegExp(search, 'g'), replacement);
			};
		const numberWithCommas = (x) => {
				return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
			}
	</script>

</body>

</html>
