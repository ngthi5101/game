<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">

<head>

<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="icon" type="image/png" sizes="96x96"
	href="/favicon-96x96.png"
	th:href="@{/resources/dashboard_files/favicon.png}" />

<title data-th-text="#{admin.page.title}">Yoker - Lịch sử nạp thẻ cào</title>

<!-- Core CSS - Include with every page -->
<link href="../css/bootstrap.min.css" rel="stylesheet"
	th:href="@{/resources/sb-admin-v2/css/bootstrap.min.css}" />
<link href="../font-awesome/css/font-awesome.css" rel="stylesheet"
	th:href="@{/resources/sb-admin-v2/font-awesome/css/font-awesome.css}" />
<link rel="stylesheet" type="text/css" media="all"
	href="../bootstrap-daterangepicker/daterangepicker-bs3.css"
	th:href="@{/resources/bootstrap-daterangepicker/daterangepicker-bs3.css}" />

<!-- Page-Level Plugin CSS - Dashboard -->
<link href="../css/plugins/dataTables/dataTables.bootstrap.css"
	rel="stylesheet"
	th:href="@{/resources/sb-admin-v2/css/plugins/dataTables/dataTables.bootstrap.css}" />
<link href="../css/plugins/morris/morris-0.4.3.min.css" rel="stylesheet"
	th:href="@{/resources/sb-admin-v2/css/plugins/morris/morris-0.4.3.min.css}" />
<link href="../css/plugins/timeline/timeline.css" rel="stylesheet"
	th:href="@{/resources/sb-admin-v2/css/plugins/timeline/timeline.css}" />
<link href="../bootstrapformhelpers/css/bootstrap-formhelpers.min.css"
	rel="stylesheet"
	th:href="@{/resources/bootstrapformhelpers/css/bootstrap-formhelpers.min.css}" />
<!-- SB Admin CSS - Include with every page -->
<link href="../css/sb-admin.css" rel="stylesheet"
	th:href="@{/resources/sb-admin-v2/css/sb-admin.css}" />

</head>

<body>

	<div id="wrapper">
		<div th:if="${userType} == 1">
			<div data-th-replace="fragments/sb-admin :: top-nav"></div>
			<div data-th-replace="fragments/sb-admin :: vert-nav-admin"></div>
		</div>
		<div th:if="${userType} == 2">
			<div data-th-replace="fragments/sb-admin :: top-nav"></div>
			<div data-th-replace="fragments/sb-admin :: vert-nav-admin"></div>
		</div>		
		<div th:if="${userType} == 4">
			<div data-th-replace="solieu/sb-solieu :: top-nav"></div>
			<div data-th-replace="solieu/sb-solieu :: vert-nav-admin"></div>
		</div>
		<div id="page-wrapper">
			<div class="row">
				<div class="col-lg-12">
					<h1 class="page-header">
						<span>Lịch sử nạp thẻ cào</span>
					</h1>
				</div>
				<!-- /.col-lg-12 -->
			</div>
			<div class="row">
				<div class="col-lg-12">
					<form role="form" method="post" action="revenues.html"
						th:action="@{/reports/card_topup.html}">
						<div class="row">
							<label>&nbsp;</label>
							<div class="col-lg-4">
								<label>Từ ngày - đến ngày</label>
								<div class="input-prepend input-group form-group">
									<span class="add-on input-group-addon"><i
										class="glyphicon glyphicon-calendar fa fa-calendar"></i></span> <input
										type="text" name="from_date" id="from_date" hidden="true"
										th:value="${from_date}" /> <input type="text" name="to_date"
										id="to_date" hidden="true" th:value="${to_date}" /> <input
										type="text" style="width: 100%" name="date_range"
										id="reservationtime" class="form-control"
										value="08/01/2013 - 08/01/2013"
										th:value="${from_date} + ' - ' + ${to_date}"
										readonly="readonly" />
								</div>
							</div>
							<!-- dungdv_start_24/10/2014                                -->
							<div class="col-lg-4">
								<label>Đối tác</label> <select name="provider" id="provider"
									class="form-control">
									<option value="">Lựa chọn</option>
									<option th:each="provider : ${providers}"
										th:value="${provider.refCode}" th:text="${provider.name}">Lựa
										chọn</option>
								</select>
							</div>
							<!-- dungdv_end_24/10/2014   -->

							<div class="col-lg-2">
								<label>&nbsp;</label>
								<div>
									<button type="submit" class="btn btn-info pull-left">Xem
										lịch sử</button>
								</div>
							</div>
						</div>
					</form>
					<!-- /.row (nested) -->
				</div>
				<!-- col 12-->
			</div>
			<!-- row -->
			<!--     dungdv_27/10/2014_start          -->
			<div class="row">
				<div class="panel-body">
					<div id="morris-card-chartHis"></div>
				</div>
			</div>
			<div class="row">
				<div hidden="true" id="jsonDataHis" th:text="${lstChartHistory}">
				</div>
				<div hidden="true" id="providerId" th:text="${providerId}"></div>
			</div>
			<!--     dungdv_27/10/2014_end          -->

			<div class="row">
				<div class="col-lg-12">
					<div class="panel panel-default" th:if="${reqCards} != null">
						<div class="panel-heading">
							Nạp thẻ cào: <span style="color: red;"
								th:text="${#numbers.formatDecimal(reqCards.size(), 0, 'COMMA', 0, 'POINT')}"></span>
						</div>
						<!-- /.panel-heading -->
						<div class="panel-body">
							<div class="table-responsive">
								<table class="table table-striped table-bordered table-hover"
									id="tblCardTopup">
									<thead>
										<tr>
											<th>#</th>
											<th>Serial</th>
											<th>Mệnh giá</th>
											<th>Chip</th>
											<th>Ngày nạp</th>
											<th>Trạng thái</th>
											<th>Người nạp</th>
											<th>PaymentGW</th>
											<th>Ghi chú</th>
										</tr>
									</thead>
									<tbody>
										<tr th:each="oneCard, iterStat : ${reqCards}">
											<td th:text="${iterStat.count}">1</td>
											<td th:text="${oneCard.serial}">Serial</td>
											<td
												th:text="${#numbers.formatDecimal(oneCard.money, 0, 'COMMA', 0, 'POINT')}">0</td>
											<td
												th:text="${#numbers.formatDecimal(oneCard.eqKoin, 0, 'COMMA', 0, 'POINT')}">0</td>
											<td th:text="${oneCard.datetime}">2014-07-01</td>
											<td>
												<div th:switch="'' + ${oneCard.processStatus}">
													<p th:case="1">Nạp thành công</p>
													<p th:case="0">Không thành công</p>
													<p th:case="2">Không thành công</p>
													<p th:case="3">Không thành công</p>
												</div>
											</td>
											<td><a href="#"
												th:href="@{'/users/detail.html?user_id=' + ${oneCard.userId}}"
												th:text="${oneCard.username}">yoker</a></td>
											<td th:text="${oneCard.gwMessage}">Thành công</td>
											<td th:text="${oneCard.note}">Note</td>
										</tr>
									</tbody>
								</table>
							</div>
							<!-- /.table-responsive -->
						</div>
						<!-- /.panel-body -->
					</div>
					<!-- /.panel -->
				</div>
				<!-- /.col-lg-12 -->
			</div>
			<!-- /.row -->
		</div>
		<!-- /#page-wrapper -->
	</div>
	<!-- /#wrapper -->

	<!-- Core Scripts - Include with every page -->
	<script src="../js/jquery-1.10.2.js"
		th:src="@{/resources/sb-admin-v2/js/jquery-1.10.2.js}"></script>
	<script src="../js/bootstrap.min.js"
		th:src="@{/resources/sb-admin-v2/js/bootstrap.min.js}"></script>
	<script src="../js/plugins/metisMenu/jquery.metisMenu.js"
		th:src="@{/resources/sb-admin-v2/js/plugins/metisMenu/jquery.metisMenu.js}"></script>

	<!-- Page-Level Plugin Scripts - Dashboard -->
	<script src="../bootstrapformhelpers/js/bootstrap-formhelpers.js"
		th:src="@{/resources/bootstrapformhelpers/js/bootstrap-formhelpers.js}"></script>
	<script type="text/javascript"
		src="../bootstrap-daterangepicker/moment.js"
		th:src="@{/resources/bootstrap-daterangepicker/moment.js}"></script>
	<script type="text/javascript"
		src="../bootstrap-daterangepicker/daterangepicker.js"
		th:src="@{/resources/bootstrap-daterangepicker/daterangepicker.js}"></script>

	<!-- Page-Level Plugin Scripts - Dashboard -->
	<script src="js/plugins/morris/raphael-2.1.0.min.js"
		th:src="@{/resources/sb-admin-v2/js/plugins/morris/raphael-2.1.0.min.js}"></script>
	<script src="js/plugins/morris/morris.js"
		th:src="@{/resources/sb-admin-v2/js/plugins/morris/morris.js}"></script>
	<!-- Page-Level Plugin Scripts - Tables -->

	<!-- Page-Level Plugin Scripts - Tables -->
	<script src="../js/plugins/dataTables/jquery.dataTables.js"
		th:src="@{/resources/sb-admin-v2/js/plugins/dataTables/jquery.dataTables.js}"></script>
	<script src="../js/plugins/dataTables/dataTables.bootstrap.js"
		th:src="@{/resources/sb-admin-v2/js/plugins/dataTables/dataTables.bootstrap.js}"></script>

	<!-- SB Admin Scripts - Include with every page -->
	<script src="../js/sb-admin.js"
		th:src="@{/resources/sb-admin-v2/js/sb-admin.js}"></script>


	<!-- Page-Level Demo Scripts - Forms - Use for reference -->
	<script>
		var data = [];
		var graphChart = Morris.Line({
			element : 'morris-card-chartHis',
			data : data,
			xkey : 'date',
			ykeys : [ 'moneyCard' ],
			labels : [ 'Doanh thu' ],
			parseTime : false,
			ymin : 0,
			ymax : 'auto',
			hideHover : true
		});
		$(document).ready(function() {
			$('#tblCardTopup').dataTable();
		});
		$('#reservationtime').daterangepicker(
				{
					timePicker : false,
					format : 'YYYY/MM/DD'
				},
				function(start, end, label) {
					console.log('A date range was chosen: '
							+ start.format('YYYY-MM-DD') + ' to '
							+ end.format('YYYY-MM-DD'));
					$('#from_date').val(start.format('YYYY-MM-DD'));
					$('#to_date').val(end.format('YYYY-MM-DD'));
				});
		//                dungdv_27/10/2014_start
		function update() {
			var providerId = $("#providerId").html();
			$("#provider").val(providerId);
			data = $("#jsonDataHis").html();
			data = $.parseJSON(data);
			graphChart.setData(data);
		}
		update();
		//                dungdv_27/10/2014_end
	</script>
</body>

</html>
